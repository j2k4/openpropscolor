<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Open Props Color Palette</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: "Segoe UI", "Helvetica Neue", sans-serif;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(19, 1fr);
            column-gap: 3px;
            padding: 20px;
            margin: 0;
            height: calc(100vh - 40px);
            width: calc(100vw - 40px);
            align-items: stretch;
            justify-items: stretch;
        }

        .color-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            border: 0;
        }

        .color-cell:nth-child(-n+19) {
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }

        .color-cell:nth-last-child(-n+19) {
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
        }



        .color-cell:hover {
            transform: scale(1.0);
            z-index: 1;
        }

        .color-cell .color-label {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: transparent;
            color: white;
            text-align: center;
            font-size: .8rem;
            font-weight: bold;
            padding: 0.5rem;
            text-wrap: nowrap;
            box-sizing: border-box;
            opacity: 0.6;
        }


        .color-cell:hover .color-label {
            display: block;
        }
    </style>
</head>

<body>

    <div class="grid-container" id="colorGrid"></div>

    <script>
        // Function to calculate luminance of a color
        function getLuminance(hex) {
            hex = hex.replace(/^#/, '');

            const r = parseInt(hex.slice(0, 2), 16) / 255;
            const g = parseInt(hex.slice(2, 4), 16) / 255;
            const b = parseInt(hex.slice(4, 6), 16) / 255;

            return (0.299 * r + 0.587 * g + 0.114 * b);
        }

        fetch('https://raw.githubusercontent.com/argyleink/open-props/main/src/props.colors.css')
            .then(response => response.text())
            .then(cssText => {
                const colorRegex = /--(.*?)-(\d+):\s*(#.*?);/g;
                let match;
                const colorGrid = document.getElementById('colorGrid');
                const colorArray = [];

                while ((match = colorRegex.exec(cssText))) {
                    const colorName = `--${match[1]}-${match[2]}`;
                    const colorValue = match[3];
                    colorArray.push({ name: colorName, value: colorValue });
                }

                const order = [
                    'red', 'pink', 'purple', 'violet',
                    'indigo', 'blue', 'cyan', 'teal', 'green', 'lime',
                    'yellow', 'orange', 'choco', 'brown', 'gray', 'stone', 'sand', 'camo', 'jungle'
                ]

                colorArray.sort((a, b) => {
                    let groupA = order.indexOf(a.name.split('-')[2]);
                    let groupB = order.indexOf(b.name.split('-')[2]);

                    if (groupA !== groupB) {
                        // If the groups are different, sort by group order
                        return groupA - groupB;
                    } else {
                        // If the groups are the same, reverse the order for darker shades
                        return parseInt(b.name.split('-')[3]) - parseInt(a.name.split('-')[3]);
                    }
                });

                // Calculate the number of colors in each 'column'
                const colorsPerColumn = colorArray.length / order.length;

                // Create a 2D array to hold columns of colors
                const columns = Array.from({ length: colorsPerColumn }, () => []);

                // Populate each 'column' with the corresponding colors
                colorArray.forEach((color, index) => {
                    const columnIndex = index % colorsPerColumn;
                    columns[columnIndex].push(color);
                });

                // Now, create the grid with the colors in a column-first order
                columns.forEach(column => {
                    column.forEach(color => {
                        const colorCell = document.createElement('div');
                        colorCell.className = 'color-cell';
                        colorCell.style.backgroundColor = color.value;
                        colorCell.title = `${color.name}: ${color.value}`;
                        colorCell.addEventListener('click', () => navigator.clipboard.writeText(color.name));

                        const colorLabel = document.createElement('div');
                        colorLabel.className = 'color-label';
                        colorLabel.textContent = color.name.substring(2);
                        // Calculate the luminance of the background color
                        const luminance = getLuminance(color.value);
                        // Set text color based on luminance
                        colorLabel.style.color = luminance > 0.5 ? 'black' : 'white';


                        colorCell.appendChild(colorLabel);
                        colorGrid.appendChild(colorCell);
                    });
                });
            });
    </script>

</body>

</html>